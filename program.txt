IMPORT stdlib
IMPORT web

MODULE INDEX WEB
    DATA
        state AS INTEGER
        label AS INTEGER
        input AS INTEGER
        result AS INTEGER
        value AS STRING OF 255
		oldValue AS STRING OF 255
    END DATA
	FUNCTION MAIN
        value = ""

	    IF state = 0 THEN
	        state = 1

	        label = createWidget("label")
	        appendWidget(0, label)
	        setWidgetData(label, "Enter text here:")

	        appendWidget(0, createWidget("break"))

	        input = createWidget("input")
	        appendWidget(0, input)
            setWidgetData(input, "Example")

            appendWidget(0, createWidget("break"))

	        result = createWidget("label")
	        appendWidget(0, result)

	    ELSE IF state = 1 THEN
	        getWidgetData(input, value)
			IF value <> oldValue THEN
			    IF value = "" THEN
    				setWidgetData(result, "Just enter something! Do it!")
			    ELSE
    				setWidgetData(result, "Entered data: " + value)
    			END IF
			END IF
			oldValue = value
	    END IF
	END FUNCTION
END MODULE
